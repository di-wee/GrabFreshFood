<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GrabFreshFood</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/login.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/styles.css" rel="stylesheet">
</head>

<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="login-grid container bg-white">
    <form class="w-100" method="post" th:action="@{/login}">
        <div class="alert alert-danger" th:if="${error}" th:text="${error}"></div>

        <div class="login-form form-group position-relative">
            <h3 class="mb-4">Sign in</h3>
            <input class="form-control mb-4"
                   name="username"
                   placeholder="Email"
                   required
                   th:value="${username}"
                   type="email"/>

            <input class="form-control mb-4"
                   id="password"
                   name="password"
                   placeholder="Password"
                   required
                   type="password"/>
            <i class="bi bi-eye-fill" id="togglePassword"></i>
        </div>

        <button class="login-button btn btn-success" style="width:100%" type="submit">
            Log in
        </button>
        <p class="register-here">
            <b>New to GrabFreshFood?
                <span><a th:href="@{/register}">Join Now</a></span>
            </b>
        </p>
    </form>
</div>

<script>
    window.onload = () => {
        const toggle = document.getElementById("togglePassword");
        const pw = document.getElementById("password");
        toggle.addEventListener("click", () => {
            const type = pw.type === "password" ? "text" : "password";
            pw.type = type;
            toggle.classList.toggle("bi-eye-fill");
            toggle.classList.toggle("bi-eye-slash-fill");
        });
    };
</script>
</body>
</html>
